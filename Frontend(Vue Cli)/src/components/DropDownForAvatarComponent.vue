<template>
  <div class="back">
    <svg
      @click="goProfile()"
      class="profile"
      width="40"
      height="40"
      viewBox="0 0 40 40"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="20" cy="20" r="20" fill="#192A39" />
      <path
        d="M20 8.00049C17.6681 8.00491 15.3879 8.68677 13.437 9.963C11.4861 11.2392 9.94878 13.0548 9.01226 15.1884C8.07573 17.3221 7.78044 19.6819 8.16235 21.9802C8.54425 24.2786 9.58687 26.4164 11.1632 28.1333C12.2891 29.3526 13.6555 30.3257 15.1764 30.9913C16.6972 31.6569 18.3396 32.0005 20 32.0005C21.6604 32.0005 23.3028 31.6569 24.8236 30.9913C26.3445 30.3257 27.7109 29.3526 28.8368 28.1333C30.4131 26.4164 31.4557 24.2786 31.8377 21.9802C32.2196 19.6819 31.9243 17.3221 30.9877 15.1884C30.0512 13.0548 28.5139 11.2392 26.563 9.963C24.6121 8.68677 22.3319 8.00491 20 8.00049ZM20 29.6228C17.5094 29.6191 15.1174 28.6502 13.3273 26.92C13.8708 25.5981 14.7954 24.4675 15.9835 23.6718C17.1716 22.876 18.5697 22.4512 20 22.4512C21.4303 22.4512 22.8284 22.876 24.0165 23.6718C25.2046 24.4675 26.1292 25.5981 26.6727 26.92C24.8826 28.6502 22.4906 29.6191 20 29.6228ZM17.5954 17.6104C17.5954 17.1353 17.7365 16.6708 18.0007 16.2757C18.2649 15.8806 18.6404 15.5727 19.0798 15.3908C19.5192 15.209 20.0027 15.1614 20.4691 15.2541C20.9355 15.3468 21.364 15.5756 21.7003 15.9116C22.0366 16.2476 22.2656 16.6757 22.3584 17.1417C22.4511 17.6078 22.4035 18.0908 22.2215 18.5298C22.0395 18.9688 21.7313 19.344 21.3359 19.608C20.9405 19.872 20.4756 20.0129 20 20.0129C19.3623 20.0129 18.7507 19.7598 18.2997 19.3092C17.8488 18.8587 17.5954 18.2476 17.5954 17.6104ZM28.3078 24.8179C27.2336 22.9821 25.5803 21.5541 23.6068 20.7577C24.219 20.0641 24.6179 19.2089 24.7556 18.2945C24.8933 17.38 24.764 16.4454 24.3832 15.6025C24.0024 14.7597 23.3863 14.0446 22.6088 13.543C21.8314 13.0413 20.9255 12.7745 20 12.7745C19.0745 12.7745 18.1686 13.0413 17.3912 13.543C16.6137 14.0446 15.9976 14.7597 15.6168 15.6025C15.236 16.4454 15.1067 17.38 15.2444 18.2945C15.3821 19.2089 15.781 20.0641 16.3931 20.7577C14.4197 21.5541 12.7664 22.9821 11.6922 24.8179C10.8361 23.3609 10.3838 21.7024 10.3817 20.0129C10.3817 17.4642 11.3951 15.0199 13.1989 13.2177C15.0026 11.4154 17.4491 10.403 20 10.403C22.5509 10.403 24.9974 11.4154 26.8011 13.2177C28.6049 15.0199 29.6183 17.4642 29.6183 20.0129C29.6162 21.7024 29.1639 23.3609 28.3078 24.8179Z"
        fill="#F5F7F9"
      />
    </svg>
    <svg
      v-if="
        mode === 'part' &&
        (role === 'admin' || organizerId == userId || userId == partId)
      "
      @click="deletePart()"
      class="delete"
      width="40"
      height="40"
      viewBox="0 0 40 40"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="20" cy="20" r="20" fill="#F23535" />
      <path
        d="M22.1365 20.9253C22.741 20.382 23.2259 19.7099 23.5582 18.9548C23.8906 18.1996 24.0626 17.3791 24.0626 16.5489C24.0626 14.9888 23.4657 13.4926 22.4033 12.3894C21.3409 11.2863 19.9 10.6665 18.3975 10.6665C16.8951 10.6665 15.4542 11.2863 14.3918 12.3894C13.3294 13.4926 12.7325 14.9888 12.7325 16.5489C12.7325 17.3791 12.9045 18.1996 13.2368 18.9548C13.5692 19.7099 14.0541 20.382 14.6586 20.9253C13.0726 21.6711 11.7269 22.8754 10.7826 24.3942C9.83824 25.913 9.33516 27.6822 9.3335 29.49C9.3335 29.8021 9.45287 30.1013 9.66535 30.3219C9.87783 30.5426 10.166 30.6665 10.4665 30.6665C10.767 30.6665 11.0552 30.5426 11.2677 30.3219C11.4801 30.1013 11.5995 29.8021 11.5995 29.49C11.5995 27.6179 12.3157 25.8225 13.5906 24.4987C14.8655 23.1749 16.5946 22.4312 18.3975 22.4312C20.2005 22.4312 21.9296 23.1749 23.2045 24.4987C24.4793 25.8225 25.1956 27.6179 25.1956 29.49C25.1956 29.8021 25.3149 30.1013 25.5274 30.3219C25.7399 30.5426 26.0281 30.6665 26.3286 30.6665C26.6291 30.6665 26.9172 30.5426 27.1297 30.3219C27.3422 30.1013 27.4616 29.8021 27.4616 29.49C27.4599 27.6822 26.9568 25.913 26.0125 24.3942C25.0681 22.8754 23.7225 21.6711 22.1365 20.9253ZM18.3975 20.0783C17.7253 20.0783 17.0681 19.8713 16.5091 19.4835C15.9502 19.0956 15.5145 18.5444 15.2573 17.8995C15 17.2546 14.9327 16.5449 15.0638 15.8603C15.195 15.1757 15.5187 14.5468 15.9941 14.0532C16.4694 13.5596 17.0751 13.2234 17.7344 13.0873C18.3938 12.9511 19.0772 13.021 19.6983 13.2881C20.3194 13.5552 20.8502 14.0076 21.2237 14.588C21.5972 15.1684 21.7965 15.8508 21.7965 16.5489C21.7965 17.4849 21.4384 18.3826 20.801 19.0445C20.1636 19.7064 19.299 20.0783 18.3975 20.0783ZM30.7586 20.6665L31.665 19.7371C31.7707 19.6274 31.8545 19.4972 31.9116 19.3539C31.9688 19.2105 31.9982 19.0569 31.9982 18.9018C31.9982 18.7467 31.9688 18.5931 31.9116 18.4497C31.8545 18.3064 31.7707 18.1762 31.665 18.0665C31.5594 17.9568 31.434 17.8698 31.2959 17.8104C31.1579 17.7511 31.01 17.7205 30.8606 17.7205C30.7112 17.7205 30.5633 17.7511 30.4252 17.8104C30.2872 17.8698 30.1618 17.9568 30.0562 18.0665L29.1611 19.0077L28.266 18.0665C28.1604 17.9568 28.035 17.8698 27.8969 17.8104C27.7589 17.7511 27.611 17.7205 27.4616 17.7205C27.1599 17.7205 26.8705 17.845 26.6571 18.0665C26.5515 18.1762 26.4677 18.3064 26.4105 18.4497C26.3534 18.5931 26.3239 18.7467 26.3239 18.9018C26.3239 19.2151 26.4438 19.5156 26.6571 19.7371L27.5635 20.6665L26.6571 21.5959C26.5509 21.7053 26.4667 21.8354 26.4091 21.9788C26.3516 22.1221 26.322 22.2759 26.322 22.4312C26.322 22.5865 26.3516 22.7403 26.4091 22.8837C26.4667 23.027 26.5509 23.1571 26.6571 23.2665C26.7625 23.3768 26.8878 23.4643 27.0258 23.524C27.1639 23.5838 27.312 23.6145 27.4616 23.6145C27.6111 23.6145 27.7592 23.5838 27.8973 23.524C28.0354 23.4643 28.1607 23.3768 28.266 23.2665L29.1611 22.3253L30.0562 23.2665C30.1615 23.3768 30.2868 23.4643 30.4249 23.524C30.5629 23.5838 30.711 23.6145 30.8606 23.6145C31.0102 23.6145 31.1582 23.5838 31.2963 23.524C31.4344 23.4643 31.5597 23.3768 31.665 23.2665C31.7712 23.1571 31.8555 23.027 31.913 22.8837C31.9705 22.7403 32.0002 22.5865 32.0002 22.4312C32.0002 22.2759 31.9705 22.1221 31.913 21.9788C31.8555 21.8354 31.7712 21.7053 31.665 21.5959L30.7586 20.6665Z"
        fill="#F5F7F9"
      />
    </svg>
    <svg
      v-if="mode === 'organizer' && userId"
      @click="goDialog()"
      class="message"
      width="40"
      height="40"
      viewBox="0 0 40 40"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="20" cy="20" r="20" fill="#192A39" />
      <path
        d="M16.3 15.0879C15.7477 15.0879 15.3 15.5356 15.3 16.0879C15.3 16.6402 15.7477 17.0879 16.3 17.0879V15.0879ZM24.7 17.0879C25.2523 17.0879 25.7 16.6402 25.7 16.0879C25.7 15.5356 25.2523 15.0879 24.7 15.0879V17.0879ZM16.3 19.1582C15.7477 19.1582 15.3 19.606 15.3 20.1582C15.3 20.7105 15.7477 21.1582 16.3 21.1582V19.1582ZM20.5 21.1582C21.0523 21.1582 21.5 20.7105 21.5 20.1582C21.5 19.606 21.0523 19.1582 20.5 19.1582V21.1582ZM30.7711 24.1349L31.6562 24.6003L31.6562 24.6003L30.7711 24.1349ZM29.8534 25.0243L30.2961 25.921L30.2961 25.921L29.8534 25.0243ZM29.8534 11.2218L30.2961 10.3252L30.2961 10.3252L29.8534 11.2218ZM30.7711 12.1112L31.6562 11.6459L31.6562 11.6459L30.7711 12.1112ZM11.1466 11.2218L11.5894 12.1185L11.5894 12.1185L11.1466 11.2218ZM10.2289 12.1112L11.114 12.5766L11.114 12.5766L10.2289 12.1112ZM11.2677 28.6918L11.8326 29.517L11.8327 29.5169L11.2677 28.6918ZM15.4284 25.843L14.8634 25.0178L14.8634 25.0178L15.4284 25.843ZM10.0948 28.7849L10.9057 28.1996L10.9057 28.1996L10.0948 28.7849ZM11.1585 28.7551L10.7229 27.855L10.7229 27.855L11.1585 28.7551ZM10.4483 28.9966L10.3065 29.9865L10.3065 29.9865L10.4483 28.9966ZM11.2283 28.7181L10.7011 27.8684L10.701 27.8684L11.2283 28.7181ZM11.2009 28.734L10.7255 27.8542L10.7255 27.8543L11.2009 28.734ZM16.5817 25.2807L16.7597 26.2647L16.7597 26.2647L16.5817 25.2807ZM16.0905 25.4319L16.4972 26.3455L16.4972 26.3455L16.0905 25.4319ZM16.3 17.0879H24.7V15.0879H16.3V17.0879ZM16.3 21.1582H20.5V19.1582H16.3V21.1582ZM13.36 12H27.64V10H13.36V12ZM30 14.2563V21.9899H32V14.2563H30ZM30 21.9899C30 22.5768 29.9992 22.955 29.9749 23.2426C29.9517 23.5176 29.9125 23.6191 29.886 23.6696L31.6562 24.6003C31.8586 24.2154 31.9338 23.8143 31.9679 23.4106C32.0008 23.0195 32 22.5428 32 21.9899H30ZM27.64 26.2462C28.2121 26.2462 28.6994 26.2469 29.0982 26.2153C29.5078 26.1829 29.9099 26.1117 30.2961 25.921L29.4106 24.1277C29.3477 24.1588 29.2311 24.1985 28.9403 24.2216C28.6388 24.2454 28.2441 24.2462 27.64 24.2462V26.2462ZM29.886 23.6696C29.7848 23.862 29.6203 24.0242 29.4106 24.1277L30.2961 25.921C30.8768 25.6343 31.3547 25.1738 31.6562 24.6003L29.886 23.6696ZM27.64 12C28.2441 12 28.6388 12.0007 28.9403 12.0246C29.2311 12.0476 29.3477 12.0874 29.4106 12.1185L30.2961 10.3252C29.9099 10.1344 29.5078 10.0633 29.0982 10.0308C28.6994 9.99927 28.2121 10 27.64 10V12ZM32 14.2563C32 13.7034 32.0008 13.2267 31.9679 12.8356C31.9338 12.4318 31.8586 12.0307 31.6562 11.6459L29.886 12.5766C29.9125 12.6271 29.9517 12.7286 29.9749 13.0036C29.9992 13.2912 30 13.6693 30 14.2563H32ZM29.4106 12.1185C29.6203 12.222 29.7848 12.3842 29.886 12.5766L31.6562 11.6459C31.3547 11.0724 30.8768 10.6119 30.2961 10.3252L29.4106 12.1185ZM13.36 10C12.7879 10 12.3006 9.99927 11.9018 10.0308C11.4922 10.0633 11.0901 10.1344 10.7039 10.3252L11.5894 12.1185C11.6523 12.0874 11.7689 12.0476 12.0597 12.0246C12.3612 12.0007 12.7559 12 13.36 12V10ZM11 14.2563C11 13.6693 11.0008 13.2912 11.0251 13.0036C11.0483 12.7286 11.0875 12.6271 11.114 12.5766L9.34376 11.6459C9.14142 12.0307 9.06618 12.4318 9.03215 12.8356C8.99917 13.2267 9 13.7034 9 14.2563H11ZM10.7039 10.3252C10.1232 10.6119 9.64528 11.0724 9.34376 11.6459L11.114 12.5766C11.2152 12.3842 11.3797 12.222 11.5894 12.1185L10.7039 10.3252ZM27.64 24.2462H17.3672V26.2462H27.64V24.2462ZM11.8327 29.5169L15.9933 26.6681L14.8634 25.0178L10.7027 27.8667L11.8327 29.5169ZM9 27.9993C9 28.1973 8.99894 28.4168 9.01628 28.6004C9.03362 28.784 9.0795 29.0868 9.2839 29.3701L10.9057 28.1996C10.9613 28.2768 10.9881 28.3471 11 28.3882C11.0106 28.4244 11.0099 28.4388 11.0074 28.4124C11.005 28.3867 11.0026 28.3436 11.0013 28.2699C11 28.1967 11 28.1109 11 27.9993H9ZM10.7229 27.855C10.6314 27.8993 10.5603 27.9333 10.5002 27.9608C10.4396 27.9885 10.4033 28.0033 10.3819 28.0111C10.36 28.0191 10.3711 28.0132 10.4042 28.0075C10.4413 28.0012 10.5069 27.9948 10.59 28.0067L10.3065 29.9865C10.6259 30.0322 10.8973 29.9521 11.068 29.8897C11.2373 29.8279 11.4243 29.7374 11.5941 29.6552L10.7229 27.855ZM9.2839 29.3701C9.52916 29.7099 9.90112 29.9284 10.3065 29.9865L10.59 28.0067C10.7097 28.0238 10.8259 28.0892 10.9057 28.1996L9.2839 29.3701ZM11 27.9993V14.2563H9V27.9993H11ZM10.7029 27.8666C10.6977 27.8701 10.6943 27.8725 10.6913 27.8745C10.6884 27.8765 10.6872 27.8773 10.687 27.8774C10.6869 27.8775 10.6926 27.8737 10.7011 27.8684L11.7555 29.5679C11.7891 29.547 11.8202 29.5254 11.8326 29.517L10.7029 27.8666ZM11.5941 29.6553C11.608 29.6485 11.6418 29.6324 11.6764 29.6137L10.7255 27.8543C10.7341 27.8496 10.7401 27.8466 10.7401 27.8466C10.7398 27.8467 10.7386 27.8474 10.7354 27.8489C10.7323 27.8504 10.7285 27.8523 10.7229 27.855L11.5941 29.6553ZM10.701 27.8684C10.7091 27.8634 10.7172 27.8587 10.7255 27.8542L11.6764 29.6137C11.7032 29.5993 11.7297 29.5839 11.7557 29.5678L10.701 27.8684ZM17.3672 24.2462C17.006 24.2462 16.7033 24.2425 16.4037 24.2967L16.7597 26.2647C16.8421 26.2498 16.9358 26.2462 17.3672 26.2462V24.2462ZM15.9933 26.6681C16.3461 26.4265 16.4229 26.3786 16.4972 26.3455L15.6839 24.5183C15.405 24.6424 15.158 24.8161 14.8634 25.0178L15.9933 26.6681ZM16.4037 24.2967C16.1558 24.3415 15.914 24.4159 15.6839 24.5183L16.4972 26.3455C16.5804 26.3084 16.6686 26.2812 16.7597 26.2647L16.4037 24.2967Z"
        fill="#F5F7F9"
      />
    </svg>
  </div>
</template>
<script>
import axios from "axios";
export default {
  data() {
    return {
      newParts: [],
    };
  },
  props: {
    role: String,
    partId: Number,
    organizerId: Number,
    userId: String,
    mode: String,
    eventId: Number,
  },
  watch: {},
  methods: {
    output() {
      axios
        .get(`http://cz57780.tw1.ru/api/event/${this.id}`)
        .then((response) => {
          if (response.data[0]) this.newParts = response.data[0].parts;
        })
        .catch((error) => {
          console.log(error);
        });
    },
    deletePart(id = this.partId, event_id = this.eventId) {
      // console.log(id,event_id);
      axios
        .post("http://cz57780.tw1.ru/api/deleteParticipant", {
          user_id: id,
          event_id: event_id,
        })
        .then((data) => {
          console.log(data);
          this.output();
        })
        .catch((data) => {
          console.log(data);
        });
    },
    goProfile() {
      this.$router.push({ path: `/profile/${this.partId}` });
    },
    goDialog() {
      this.$router.push({ path: `/dialog/${this.organizerId}` });
    },
  },
};
</script>
<style scoped>
.back {
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  border-radius: 15px;
  background-color: var(--white);
}

.delete:hover path {
  fill: var(--blue);
}

.profile {
  margin-right: 25px;
}

.profile:hover path {
  fill: var(--red);
}

.message:hover path {
  fill: var(--red);
}
</style>
